VDR-Konfiguration
~~~~~~~~~~~~~~~~~

Für {version} wurde in Abstimmung mit den VDR-Paketen von e-tobi die
Möglichkeiten zur Konfiguration des VDR überarbeit. Seit dem VDR 2.1.x
kann der VDR die Konfiguration für die Start-Argumente und die Plugins
selbst einlesen, so dass man nicht mehr auf ein komplexes Start-Skript
angewiesen ist.

[CAUTION]
.Änderungen gegenüber yaVDR 0.5 und früher
====
Die Konfiguration der Start-Argumente für den VDR und die Plugins
erfolgt bei {version} nicht länger über die Dateien
'/etc/default/vdr', '/etc/vdr/plugin/plugin.<plugin_name>.conf' und
die '/etc/vdr/plugins/order.conf', sondern über die Dateien in
'/etc/vdr/conf.d/*.conf'
====

Dazu liest der VDR alle Dateien aus dem Verzeichnis '/etc/vdr/conf.d/'
mit der Endung *.conf* ein.  Die Syntax ähnelt dem bekannten
**ini**-Format.

Jeder Abschnitt wird durch eine Zeile eingeleitet, die durch einen
Begriff in eckigen Klammern angibt, wofür die nachfolgenden Zeilen
gelten sollen.  Für den VDR also *[vdr]* und für Plugins der
Pluginname, z.B.  *[softhddevice]* für das Softhddevice-Plugin.  In
den folgenden Zeilen können dann Start-Argumente für den VDR bzw. das
jeweilige Plugin übergeben werden. Falls es mehrere Abschnitte mit dem
gleichen Titel gibt, werden die Argumente dieser Abschnitte
aneinandergehängt übergeben.  Zeilen, die mit einer Raute *#*
beginnen, werden vom Parser ignoriert.

Um ein Plugin zu starten, genügt es seinen Namen in eckigen Klammern
in einer Konfigurationsdatei abzulegen, will man den Start verhindern,
muss man dafür sorgen, dass der VDR den Eintrag nicht mehr einliest.
Ein bequemes Werkzeug um Plugins zu (de-)aktivieren oder die
Start-Argumente zu bearbeiten ist <<vdrctl,vdrctl>>.

Die Datei '/etc/vdr/conf.d/00_vdr.conf' enthält die vom Distributor
vorgegebenen Start-Argumente für den VDR. Da alle Dateien in '/etc/',
die aus Paketen stammen, vom Paket-System als Konfigurationsdateien
angesehen werden, können diese nach Wunsch verändert werden. Falls ein
Paket beim Update eine davon abweichende Version mitbringt, erhält man eine
Rückfrage, welche Version man übernehmen möchte.

Die Plugin-Pakete werden mit vorgefertigten Konfigurationsdateien
ausgeliefert, die nach '/etc/vdr/conf.avail/<plugin_name>.conf'
installiert und (falls der Distributor vorgibt, dass das Plugin
automatisch nach der Installation aktiviert werden soll, wie es bei
yaVDR der Fall ist) nach
'/etc/vdr/conf.d/<priorität>-<plugin_name>.conf' verlinkt werden. Die
Standard-Priorität ist 50, ein abweichender Wert kann vom Distributor
vorgegeben werden.

.Beispiel für eine Konfigurationsdatei für das softhddevice Plugin
----
#  -a device     audio device (fe. alsa: hw:0,0 oss: /dev/dsp)
#  -p device     audio device for pass-through (hw:0,1 or /dev/dsp1)
#  -c channel    audio mixer channel name (fe. PCM)
#  -d display    display of x11 server (fe. :0.0)
#  -f            start with fullscreen window (only with window manager)
#  -g geometry   x11 window geometry wxh+x+y
#  -v device     video driver device (va-api, vdpau, noop)
#  -s            start in suspended mode
#  -x            start x11 server, with -xx try to connect, if this fails
#  -X args       X11 server arguments (f.e. -nocursor)
#  -w workaround enable/disable workarounds
#        no-hw-decoder           disable hw decoder, use software decoder only
#        no-mpeg-hw-decoder      disable hw decoder for mpeg only
#        still-hw-decoder        enable hardware decoder for still-pictures
#        still-h264-hw-decoder   enable h264 hw decoder for still-pictures
#        alsa-driver-broken      disable broken alsa driver message
#        alsa-no-close-open      disable close open to fix alsa no sound bug
#        alsa-close-open-delay   enable close open delay to fix no sound bug
#        ignore-repeat-pict      disable repeat pict message
#        use-possible-defect-frames prefer faster channel switch
#  -D            start in detached mode
#

[softhddevice]
-D
-d :1.0
-w still-hw-decocer
-v vdpau
----

[[vdrctl]]
vdrctl
^^^^^^

vdrctl ist ein Hilfsprogramm, das die Verwaltung der
Konfigurationsdateien für den VDR vereinfacht. Hier ein paar
Beispiele zur Verwendung:

.Hilfe zu vdrctl anzeigen
----
$ vdrctl -h
----

.Status aller verfügbaren Plugins
---------------------------------
$ vdrctl status
---------------------------------

.Aktivierung eines Plugins
--------------------------
$ sudo vdrctl enable streamdev-client
--------------------------

.Aktivierung mehrerer Plugins
-----------------------------
$ sudo vdrctl enable streamdev-client vnsiserver 
-----------------------------

.Deaktivierung eines Plugins
----------------------------
$ sudo vdrctl disable iptv
----------------------------

.Deaktivierung mehrerer Plugins
-------------------------------
$ sudo vdrctl disable streamdev-client streamdev-server iptv
-------------------------------

.Bearbeiten der Konfiguration für ein Plugin
--------------------------------------------
$ sudo vdrctl edit imonlcd
--------------------------------------------

.Bearbeiten der Konfiguration mit einem Wunsch-Editor (hier vim):
----
$ EDITOR=vim sudo vdrctl edit imonlcd
----
